(()=>{const e="scroll-trigger--offscreen";function t(t,r){t.forEach(((t,s)=>{if(t.isIntersecting){const i=t.target;i.classList.contains(e)&&(i.classList.remove(e),i.hasAttribute("data-cascade")&&i.setAttribute("style",`--animation-order: ${s};`)),r.unobserve(i)}else t.target.classList.add(e),t.target.classList.remove("scroll-trigger--cancel")}))}window.addEventListener("DOMContentLoaded",(()=>function(e=document,r=!1){const s=Array.from(e.getElementsByClassName("scroll-trigger"));if(0===s.length)return;if(r)return void s.forEach((e=>{e.classList.add("scroll-trigger--design-mode")}));const i=new IntersectionObserver(t,{rootMargin:"0px 0px -50px 0px"});s.forEach((e=>i.observe(e)))}()))})(),(()=>{class e extends HTMLElement{constructor(){super(),this.addEventListener("keyup",(e=>"Escape"===e.code&&this.close())),this.querySelector("#CartDrawer-Overlay").addEventListener("click",this.close.bind(this)),this.setHeaderCartIconAccessibility()}setHeaderCartIconAccessibility(){const e=document.querySelector("#cart-icon-bubble");e.setAttribute("role","button"),e.setAttribute("aria-haspopup","dialog"),e.addEventListener("click",(t=>{t.preventDefault(),this.open(e)})),e.addEventListener("keydown",(t=>{"SPACE"===t.code.toUpperCase()&&(t.preventDefault(),this.open(e))}))}open(e){e&&this.setActiveElement(e);const t=this.querySelector('[id^="Details-"] summary');t&&!t.hasAttribute("role")&&this.setSummaryAccessibility(t),setTimeout((()=>{this.classList.add("animate","active")})),this.addEventListener("transitionend",(()=>{const e=this.classList.contains("is-empty")?this.querySelector(".drawer__inner-empty"):document.getElementById("CartDrawer"),t=this.querySelector(".drawer__inner")||this.querySelector(".drawer__close");trapFocus(e,t)}),{once:!0}),document.body.classList.add("overflow-hidden")}close(){this.classList.remove("active"),removeTrapFocus(this.activeElement),document.body.classList.remove("overflow-hidden")}setSummaryAccessibility(e){e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),e.nextElementSibling.getAttribute("id")&&e.setAttribute("aria-controls",e.nextElementSibling.id),e.addEventListener("click",(e=>{e.currentTarget.setAttribute("aria-expanded",!e.currentTarget.closest("details").hasAttribute("open"))})),e.parentElement.addEventListener("keyup",onKeyUpEscape)}renderContents(e){this.querySelector(".drawer__inner").classList.contains("is-empty")&&this.querySelector(".drawer__inner").classList.remove("is-empty"),this.productId=e.id,this.getSectionsToRender().forEach((t=>{(t.selector?document.querySelector(t.selector):document.getElementById(t.id)).innerHTML=this.getSectionInnerHTML(e.sections[t.id],t.selector)})),setTimeout((()=>{this.querySelector("#CartDrawer-Overlay").addEventListener("click",this.close.bind(this)),this.open()}))}getSectionInnerHTML(e,t=".shopify-section"){return(new DOMParser).parseFromString(e,"text/html").querySelector(t).innerHTML}getSectionsToRender(){return[{id:"cart-drawer",selector:"#CartDrawer"},{id:"cart-icon-bubble"}]}getSectionDOM(e,t=".shopify-section"){return(new DOMParser).parseFromString(e,"text/html").querySelector(t)}setActiveElement(e){this.activeElement=e}}customElements.define("cart-drawer",e);class t extends CartItems{getSectionsToRender(){return[{id:"CartDrawer",section:"cart-drawer",selector:".drawer__inner"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"}]}}customElements.define("cart-drawer-items",t)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b3VyY2VzIjpbIndlYnBhY2s6Ly9idWlsZC8uL3NyYy9hbmltYXRpb25zLmpzIiwid2VicGFjazovL2J1aWxkLy4vc3JjL2NhcnQtZHJhd2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNDUk9MTF9BTklNQVRJT05fVFJJR0dFUl9DTEFTU05BTUUgPSAnc2Nyb2xsLXRyaWdnZXInO1xuY29uc3QgU0NST0xMX0FOSU1BVElPTl9PRkZTQ1JFRU5fQ0xBU1NOQU1FID0gJ3Njcm9sbC10cmlnZ2VyLS1vZmZzY3JlZW4nO1xuY29uc3QgU0NST0xMX0FOSU1BVElPTl9DQU5DRUxfQ0xBU1NOQU1FID0gJ3Njcm9sbC10cmlnZ2VyLS1jYW5jZWwnO1xuZnVuY3Rpb24gb25JbnRlcnNlY3Rpb24oZWxlbWVudHMsIG9ic2VydmVyKSB7XG4gIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgaWYgKGVsZW1lbnQuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnRUYXJnZXQgPSBlbGVtZW50LnRhcmdldDtcbiAgICAgIGlmIChlbGVtZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhTQ1JPTExfQU5JTUFUSU9OX09GRlNDUkVFTl9DTEFTU05BTUUpKSB7XG4gICAgICAgIGVsZW1lbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZShTQ1JPTExfQU5JTUFUSU9OX09GRlNDUkVFTl9DTEFTU05BTUUpO1xuICAgICAgICBpZiAoZWxlbWVudFRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2FzY2FkZScpKVxuICAgICAgICAgIGVsZW1lbnRUYXJnZXQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAtLWFuaW1hdGlvbi1vcmRlcjogJHtpbmRleH07YCk7XG4gICAgICB9XG4gICAgICBvYnNlcnZlci51bm9ic2VydmUoZWxlbWVudFRhcmdldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoU0NST0xMX0FOSU1BVElPTl9PRkZTQ1JFRU5fQ0xBU1NOQU1FKTtcbiAgICAgIGVsZW1lbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoU0NST0xMX0FOSU1BVElPTl9DQU5DRUxfQ0xBU1NOQU1FKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplU2Nyb2xsQW5pbWF0aW9uVHJpZ2dlcihyb290RWwgPSBkb2N1bWVudCwgaXNEZXNpZ25Nb2RlRXZlbnQgPSBmYWxzZSkge1xuICBjb25zdCBhbmltYXRpb25UcmlnZ2VyRWxlbWVudHMgPSBBcnJheS5mcm9tKHJvb3RFbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFNDUk9MTF9BTklNQVRJT05fVFJJR0dFUl9DTEFTU05BTUUpKTtcbiAgaWYgKGFuaW1hdGlvblRyaWdnZXJFbGVtZW50cy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICBpZiAoaXNEZXNpZ25Nb2RlRXZlbnQpIHtcbiAgICBhbmltYXRpb25UcmlnZ2VyRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzY3JvbGwtdHJpZ2dlci0tZGVzaWduLW1vZGUnKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihvbkludGVyc2VjdGlvbiwge1xuICAgIHJvb3RNYXJnaW46ICcwcHggMHB4IC01MHB4IDBweCcsXG4gIH0pO1xuICBhbmltYXRpb25UcmlnZ2VyRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KSk7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gaW5pdGlhbGl6ZVNjcm9sbEFuaW1hdGlvblRyaWdnZXIoKSk7XG5cbi8vIGlmIChTaG9waWZ5LmRlc2lnbk1vZGUpIHtcbi8vICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2hvcGlmeTpzZWN0aW9uOmxvYWQnLCAoZXZlbnQpID0+IGluaXRpYWxpemVTY3JvbGxBbmltYXRpb25UcmlnZ2VyKGV2ZW50LnRhcmdldCwgdHJ1ZSkpO1xuLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzaG9waWZ5OnNlY3Rpb246cmVvcmRlcicsICgpID0+IGluaXRpYWxpemVTY3JvbGxBbmltYXRpb25UcmlnZ2VyKGRvY3VtZW50LCB0cnVlKSk7XG4vLyB9XG4iLCJjbGFzcyBDYXJ0RHJhd2VyIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldnQpID0+IGV2dC5jb2RlID09PSAnRXNjYXBlJyAmJiB0aGlzLmNsb3NlKCkpO1xuICAgIHRoaXMucXVlcnlTZWxlY3RvcignI0NhcnREcmF3ZXItT3ZlcmxheScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNldEhlYWRlckNhcnRJY29uQWNjZXNzaWJpbGl0eSgpO1xuICB9XG5cbiAgc2V0SGVhZGVyQ2FydEljb25BY2Nlc3NpYmlsaXR5KCkge1xuICAgIGNvbnN0IGNhcnRMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcnQtaWNvbi1idWJibGUnKTtcbiAgICBjYXJ0TGluay5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgY2FydExpbmsuc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgJ2RpYWxvZycpO1xuICAgIGNhcnRMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5vcGVuKGNhcnRMaW5rKTtcbiAgICB9KTtcbiAgICBjYXJ0TGluay5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuY29kZS50b1VwcGVyQ2FzZSgpID09PSAnU1BBQ0UnKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMub3BlbihjYXJ0TGluayk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKHRyaWdnZXJlZEJ5KSB7XG4gICAgaWYgKHRyaWdnZXJlZEJ5KSB0aGlzLnNldEFjdGl2ZUVsZW1lbnQodHJpZ2dlcmVkQnkpO1xuICAgIGNvbnN0IGNhcnREcmF3ZXJOb3RlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdbaWRePVwiRGV0YWlscy1cIl0gc3VtbWFyeScpO1xuICAgIGlmIChjYXJ0RHJhd2VyTm90ZSAmJiAhY2FydERyYXdlck5vdGUuaGFzQXR0cmlidXRlKCdyb2xlJykpIHRoaXMuc2V0U3VtbWFyeUFjY2Vzc2liaWxpdHkoY2FydERyYXdlck5vdGUpO1xuICAgIC8vIGhlcmUgdGhlIGFuaW1hdGlvbiBkb2Vzbid0IHNlZW0gdG8gYWx3YXlzIGdldCB0cmlnZ2VyZWQuIEEgdGltZW91dCBzZWVtIHRvIGhlbHBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScsICdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0cmFuc2l0aW9uZW5kJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyVG9UcmFwRm9jdXNPbiA9IHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1lbXB0eScpXG4gICAgICAgICAgPyB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5kcmF3ZXJfX2lubmVyLWVtcHR5JylcbiAgICAgICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdDYXJ0RHJhd2VyJyk7XG4gICAgICAgIGNvbnN0IGZvY3VzRWxlbWVudCA9IHRoaXMucXVlcnlTZWxlY3RvcignLmRyYXdlcl9faW5uZXInKSB8fCB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5kcmF3ZXJfX2Nsb3NlJyk7XG4gICAgICAgIHRyYXBGb2N1cyhjb250YWluZXJUb1RyYXBGb2N1c09uLCBmb2N1c0VsZW1lbnQpO1xuICAgICAgfSxcbiAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgKTtcblxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnb3ZlcmZsb3ctaGlkZGVuJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHJlbW92ZVRyYXBGb2N1cyh0aGlzLmFjdGl2ZUVsZW1lbnQpO1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmZsb3ctaGlkZGVuJyk7XG4gIH1cblxuICBzZXRTdW1tYXJ5QWNjZXNzaWJpbGl0eShjYXJ0RHJhd2VyTm90ZSkge1xuICAgIGNhcnREcmF3ZXJOb3RlLnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcbiAgICBjYXJ0RHJhd2VyTm90ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcblxuICAgIGlmIChjYXJ0RHJhd2VyTm90ZS5uZXh0RWxlbWVudFNpYmxpbmcuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICBjYXJ0RHJhd2VyTm90ZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCBjYXJ0RHJhd2VyTm90ZS5uZXh0RWxlbWVudFNpYmxpbmcuaWQpO1xuICAgIH1cblxuICAgIGNhcnREcmF3ZXJOb3RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICFldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2RldGFpbHMnKS5oYXNBdHRyaWJ1dGUoJ29wZW4nKSk7XG4gICAgfSk7XG5cbiAgICBjYXJ0RHJhd2VyTm90ZS5wYXJlbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25LZXlVcEVzY2FwZSk7XG4gIH1cblxuICByZW5kZXJDb250ZW50cyhwYXJzZWRTdGF0ZSkge1xuICAgIHRoaXMucXVlcnlTZWxlY3RvcignLmRyYXdlcl9faW5uZXInKS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWVtcHR5JykgJiZcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvcignLmRyYXdlcl9faW5uZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1lbXB0eScpO1xuICAgIHRoaXMucHJvZHVjdElkID0gcGFyc2VkU3RhdGUuaWQ7XG4gICAgdGhpcy5nZXRTZWN0aW9uc1RvUmVuZGVyKCkuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xuICAgICAgY29uc3Qgc2VjdGlvbkVsZW1lbnQgPSBzZWN0aW9uLnNlbGVjdG9yXG4gICAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWN0aW9uLnNlbGVjdG9yKVxuICAgICAgICA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlY3Rpb24uaWQpO1xuICAgICAgc2VjdGlvbkVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5nZXRTZWN0aW9uSW5uZXJIVE1MKHBhcnNlZFN0YXRlLnNlY3Rpb25zW3NlY3Rpb24uaWRdLCBzZWN0aW9uLnNlbGVjdG9yKTtcbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCcjQ2FydERyYXdlci1PdmVybGF5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRTZWN0aW9uSW5uZXJIVE1MKGh0bWwsIHNlbGVjdG9yID0gJy5zaG9waWZ5LXNlY3Rpb24nKSB7XG4gICAgcmV0dXJuIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLmlubmVySFRNTDtcbiAgfVxuXG4gIGdldFNlY3Rpb25zVG9SZW5kZXIoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdjYXJ0LWRyYXdlcicsXG4gICAgICAgIHNlbGVjdG9yOiAnI0NhcnREcmF3ZXInLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdjYXJ0LWljb24tYnViYmxlJyxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxuXG4gIGdldFNlY3Rpb25ET00oaHRtbCwgc2VsZWN0b3IgPSAnLnNob3BpZnktc2VjdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJykucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICBzZXRBY3RpdmVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnY2FydC1kcmF3ZXInLCBDYXJ0RHJhd2VyKTtcblxuY2xhc3MgQ2FydERyYXdlckl0ZW1zIGV4dGVuZHMgQ2FydEl0ZW1zIHtcbiAgZ2V0U2VjdGlvbnNUb1JlbmRlcigpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBpZDogJ0NhcnREcmF3ZXInLFxuICAgICAgICBzZWN0aW9uOiAnY2FydC1kcmF3ZXInLFxuICAgICAgICBzZWxlY3RvcjogJy5kcmF3ZXJfX2lubmVyJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAnY2FydC1pY29uLWJ1YmJsZScsXG4gICAgICAgIHNlY3Rpb246ICdjYXJ0LWljb24tYnViYmxlJyxcbiAgICAgICAgc2VsZWN0b3I6ICcuc2hvcGlmeS1zZWN0aW9uJyxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2NhcnQtZHJhd2VyLWl0ZW1zJywgQ2FydERyYXdlckl0ZW1zKTtcbiJdLCJuYW1lcyI6WyJTQ1JPTExfQU5JTUFUSU9OX09GRlNDUkVFTl9DTEFTU05BTUUiLCJvbkludGVyc2VjdGlvbiIsImVsZW1lbnRzIiwib2JzZXJ2ZXIiLCJmb3JFYWNoIiwiZWxlbWVudCIsImluZGV4IiwiaXNJbnRlcnNlY3RpbmciLCJlbGVtZW50VGFyZ2V0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJoYXNBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ1bm9ic2VydmUiLCJhZGQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicm9vdEVsIiwiZG9jdW1lbnQiLCJpc0Rlc2lnbk1vZGVFdmVudCIsImFuaW1hdGlvblRyaWdnZXJFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsZW5ndGgiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsInJvb3RNYXJnaW4iLCJvYnNlcnZlIiwiaW5pdGlhbGl6ZVNjcm9sbEFuaW1hdGlvblRyaWdnZXIiLCJDYXJ0RHJhd2VyIiwiSFRNTEVsZW1lbnQiLCJjb25zdHJ1Y3RvciIsInN1cGVyIiwidGhpcyIsImV2dCIsImNvZGUiLCJjbG9zZSIsInF1ZXJ5U2VsZWN0b3IiLCJiaW5kIiwic2V0SGVhZGVyQ2FydEljb25BY2Nlc3NpYmlsaXR5IiwiY2FydExpbmsiLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwib3BlbiIsInRvVXBwZXJDYXNlIiwidHJpZ2dlcmVkQnkiLCJzZXRBY3RpdmVFbGVtZW50IiwiY2FydERyYXdlck5vdGUiLCJzZXRTdW1tYXJ5QWNjZXNzaWJpbGl0eSIsInNldFRpbWVvdXQiLCJjb250YWluZXJUb1RyYXBGb2N1c09uIiwiZ2V0RWxlbWVudEJ5SWQiLCJmb2N1c0VsZW1lbnQiLCJ0cmFwRm9jdXMiLCJvbmNlIiwiYm9keSIsInJlbW92ZVRyYXBGb2N1cyIsImFjdGl2ZUVsZW1lbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJnZXRBdHRyaWJ1dGUiLCJpZCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZXN0IiwicGFyZW50RWxlbWVudCIsIm9uS2V5VXBFc2NhcGUiLCJyZW5kZXJDb250ZW50cyIsInBhcnNlZFN0YXRlIiwicHJvZHVjdElkIiwiZ2V0U2VjdGlvbnNUb1JlbmRlciIsInNlY3Rpb24iLCJzZWxlY3RvciIsImlubmVySFRNTCIsImdldFNlY3Rpb25Jbm5lckhUTUwiLCJzZWN0aW9ucyIsImh0bWwiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJnZXRTZWN0aW9uRE9NIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJDYXJ0RHJhd2VySXRlbXMiLCJDYXJ0SXRlbXMiXSwic291cmNlUm9vdCI6IiJ9